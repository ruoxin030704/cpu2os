## BNF 語法樹

BNF (巴科斯范式) 語法樹是一種樹狀結構，用於表示一個符合某個 BNF 語法定義的語句。在 BNF 語法樹中，每個節點表示 BNF 規則的一個符號，而每個葉子節點則表示該符號所對應的終結符號 (即不可再被展開的符號)。

例如，考慮以下簡單的 BNF 規則：

```bnf
<expression> ::= <term> "+" <expression> | <term>
<term> ::= <factor> "*" <term> | <factor>
<factor> ::= "(" <expression> ")" | <number>
<number> ::= <digit> | <digit> <number>
<digit> ::= "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"
```

這個 BNF 規則定義了一種算術表達式語言。下圖是對應的 BNF 語法樹，它表示了一個包含加法、乘法和括號的算術表達式 "2*(3+4)"：

```
          <expression>
             /     \
        <term>     "+"
          /  \       \
     <factor>  "*"   <expression>
          /   \        /     \
     "2"     "(" <expression> ")"
                   /   \
                <term> "+"
                   /  \
             <factor>   <factor>
               /  \        |
             "3"   "4"   <digit>

```

這個語法樹中，每個節點都代表一個非終結符號，而每個葉子節點則代表一個終結符號或一個字面值。該樹以 expression 為根節點，該節點的兩個子節點分別是 term 和 "+"，表示這個表達式由一個項和一個運算符相加得到。term 節點有兩個子節點，分別是 factor 和 "*"，表示這個項由一個因子和一個乘法運算符相乘得到。factor 節點有兩個子節點，分別是 "2" 和 "("，表示這個因子可以是一個字面值或一個括號包圍的表達式。在 ( 子節點下面的子樹是另一個 expression，表示括號內的表達式。

## 語義樹

語義樹通常還需要包含變數型態等額外信息。這是因為語法樹只表示程式碼的語法結構，而沒有包含關於變數型態等額外信息。

例如，考慮以下代碼：

```
x = 2 + 3 * 4;
```

語法樹如下所示：

```
            =
          /   \
         x    +
             / \
            2   *
               / \
              3   4

```

但如果要進行語義分析，那麼需要知道變數 x 的型態，以及每個字面值和運算符的型態。在這種情況下，語義樹通常會包含型態信息，例如：

```
            = (int)
          /   \
         x (int)  +
                 / \
              (int)  *
                    / \
                  (int) 3  (int) 4

```

在這個語義樹中，每個節點都標有對應的變數或字面值的型態，這可以方便後續的語義分析和代碼生成。

