# 第二章：基本語法和概念

## 資料型別和變數

在 C 語言中，資料型別指的是變數或常數可以存儲的值的範圍和類型。C 語言支持多種基本資料型別，包括整數型別、浮點型別、字符型別和布林型別。每種資料型別都有其特定的儲存範圍和允許的操作。

C 語言中的變數必須先聲明才能使用，聲明變數的方式是指定其資料型別和名稱。變數可以在聲明的同時進行初始化，也可以在稍後的程序中進行賦值。在 C 語言中，變數的作用域和生命週期都與它們的聲明位置有關。

例如，下面是一個聲明整數型別變數的例子：

```cpp
int a; // 聲明整數型別變數 a
a = 10; // 將 a 賦值為 10

```

## 運算符和運算式

C 語言支持多種運算符和表達式，可以用來對變數和常數進行算術、邏輯、比較和位運算等操作。常見的算術運算符包括加、減、乘、除和求餘等，常見的邏輯運算符包括與、或、非和互斥或等，常見的比較運算符包括等於、大於、小於和不等於等。

在 C 語言中，表達式由運算符和操作數組成，可以是單個變數、常數，也可以是多個變數、常數和運算符的組合。表達式的結果可以是一個值或一個地址。

例如，下面是一個算術運算的例子：

```cpp
int a = 10, b = 5;
int c = a + b; // 計算 a 和 b 的和並賦值給 c

```

## 控制結構和迴圈

C 語言支持多種流程控制結構，包括條件語句、循環語句和跳轉語句。條件語句用於根據某個條件來執行不同的程序，例如 if 和 switch 語句；循環語句用於重複執行某個程序，例如 for、while 和 do-while 語句；跳轉語句用於程序中跳轉到其他的位置，例如 break、continue 和 goto 語句。

例如，下面是一個使用 if 語句的例子：

```cpp
int a = 10, b = 5;
if (a > b) {
    printf("a is greater than b");
} else {
    printf("b is greater than a");
}

```


下面是一個使用 while 控制流程的例子：

```cpp
int i = 0;
while (i < 10) { // 使用循環語句進行重複執行
    if (i % 2 == 0) { // 使用條件語句進行判斷
        i++;
        continue;
    }
    printf("%d ", i); // 使用跳轉語句進行跳轉
    i++;
}

```

下面是一個使用 for 循環語句的例子：

```cpp
for (int i = 0; i < 10; i++) {
    printf("%d\n", i);
}

```

下面是一個使用 goto 語句的例子：

```cpp
int i = 0;
loop:
    printf("%d\n", i);
    i++;
    if (i < 10) {
        goto loop;
    }

```

## 函式和遞迴

C 語言中的函數是一個可重複使用的程序段，可以將某些操作封裝在一個函數中，使得程序更加模組化和易於維護。C 語言中的函數包括標準庫函數和用戶自定義函數，可以根據需要進行調用和傳遞參數。

函數的聲明包括函數名稱、返回值類型、參數列表和函數體。函數可以有返回值也可以沒有返回值，可以有參數也可以沒有參數。

例如，下面是一個自定義函數的例子：

```cpp
int add(int a, int b) {
    return a + b;
}

int result = add(10, 5); // 調用函數並獲取返回值

```

C 語言中的遞迴是一種函數調用自身的技術，可以用於解決一些複雜的問題。

例如，下面是一個使用遞迴的例子：

```cpp
int factorial(int n) { // 定義一個計算階乘的函數
    if (n == 0) {
        return 1;
    }
    return n * factorial(n - 1); // 使用遞迴調用自身
}
int result = factorial(5); // 調用函數計算 5 的階乘
printf("5! = %d\n", result);

```

## 結構 (struct) 和聯合 (union)

C 語言中的結構是一個由不同資料型別的變量組成的集合，可以通過結構名稱和成員名稱來訪問和修改結構成員的值。C 語言中的聯合是一個可以儲存不同資料型別的變量的集合，同一時間只能儲存其中的一個成員。

例如，下面是一個使用結構和聯合的例子：

```cpp
struct Person {
    char name[20];
    int age;
    float height;
};

union Value {
    int i;
    float f;
};

struct Person person = {"Tom", 25, 1.75};
union Value value = {.f = 3.14};
printf("%s is %d years old and %.2f meters tall\n", person.name, person.age, person.height);
printf("The value is %d\n", value.i);

```

## 指針和內存管理

C 語言中的指針是一個儲存變量地址的變量，可以通過指針來訪問和修改變量的值。C 語言中的內存管理包括動態分配和釋放內存，可以通過 malloc 和 free 函數來實現。

使用指針和內存管理需要特別注意內存的分配和釋放，否則可能會引發內存泄漏或者應用程序崩潰等問題。

例如，下面是一個使用指針和內存管理的例子：

```cpp
int *p = (int *)malloc(sizeof(int) * 10); // 動態分配 10 個 int 變量的內存空間
for (int i = 0; i < 10; i++) {
    *(p + i) = i; // 使用指針訪問和修改變量的值
}
free(p); // 釋放動態分配的內存空間

```

## 預處理器和文件操作

C 語言中的預處理器是一個用於處理源代碼的程序，可以通過宏定義、條件編譯和文件包含等指令來實現。C 語言中的文件操作是一個用於讀寫文件的系統調用，可以通過標準 I/O 函數和文件指針等方式來實現。

例如，下面是一個使用預處理器和文件操作的例子：

```cpp
#define PI 3.1415926 // 定義一個宏
#ifdef DEBUG // 使用條件編譯指令
    printf("Debugging...\n");
#endif
FILE *fp = fopen("file.txt", "r"); // 打開文件
char buf[1024];
fgets(buf, 1024, fp); // 讀取文件內容
fclose(fp); // 關閉文件
printf("The value of PI is %f\n", PI);
printf("The content of file.txt is:\n%s", buf);

```

## 小結

本章介紹了 C 語言的基本語法和概念，包括資料型別和變數、結構和枚舉、運算符和表達式、控制流程、函數和遞迴、預處理器和文件操作等。這些基本概念和語法是 C 語言的核心特性，是進一步學習和應用 C 語言的基礎。

在實際的 C 語言開發中，這些語法和概念會被廣泛應用到各個方面，例如數據結構、算法、操作系統、網路編程等。因此，熟練掌握這些基本概念和語法對於成為一個優秀的 C 語言開發人員非常重要。
