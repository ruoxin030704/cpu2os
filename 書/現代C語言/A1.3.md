## 3. 字元串的處理的陷阱

C 語言中的字元串常常容易引發一些問題，下面列出了幾個常見的陷阱。

1. 字元串的長度

在 C 語言中，字元串以 '\0' 結尾。因此，計算字元串的長度的時候，必須考慮 '\0' 這個結尾符號。如果你忘了加上 '\0' 的長度，使用字元串的函數（如 strlen、strcat）可能會導致錯誤。

例如，如果你使用了以下的代碼：

```c
char str[] = "hello";
int len = strlen(str); // 錯誤的做法
```

因為忘了加上 '\0'，這個代碼將會計算出錯誤的字元串長度。

正確的寫法是：

```c
char str[] = "hello";
int len = strlen(str) + 1; // 正確的做法，加 1 是為了包含 '\0'
```

2. 字元串的修改

C 語言中的字元串是不可修改的，也就是說，如果你嘗試修改一個字元串，可能會導致錯誤。如果你需要修改字元串，你應該使用字符數組。

例如，如果你使用了以下的代碼：

```c
char str[] = "hello";
str[0] = 'H'; // 錯誤的做法，無法修改字元串
```

這段代碼將會導致錯誤。正確的做法是使用字符數組：

```c
char str[] = "hello";
char arr[] = {'H', 'e', 'l', 'l', 'o', '\0'};
```

3. 字元串的初始化

C 語言中的字元串必須在定義時進行初始化，否則將會包含未知的內容。如果你需要一個空的字元串，你可以初始化成空串（""）：

```c
char str[] = "";
```

或者你也可以使用 char 數組：

```c
char str[100] = {'\0'};
```

這個 char 數組初始化為全 0，相當於空字元串。