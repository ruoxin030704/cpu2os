## 9. 位元運算的使用的陷阱

位元運算通常是用來進行二進制數字的運算，例如：按位與(&)、按位或(|)、按位取反(~)、左移(<<)、右移(>>)等。然而，使用位元運算時需要注意以下幾個陷阱：

1. 宣告的資料型別：使用位元運算時需先確定所要操作的變數為什麼型別，例如 unsigned int, signed int 等，宣告不當可能會導致運算結果不如預期。

2. 溢位(overflow)問題：使用位元運算時，若位元數不足可能會發生溢位的問題，例如：對一個 unsigned int 做左移運算可能會導致最高位丟失。

3. 操作順序：位元運算有優先順序，如左移(<<)和右移(>>)都比按位與(&)和按位或(|)的優先順序低，而按位取反(~)的優先順序最高，故在使用位元運算時需確定操作的順序，否則會導致結果不如預期。

4. 跨平台問題：不同平台的編譯器對於位元運算的實作可能不同，因此在跨平台的開發中，必須確定所用的位元運算是否跨平台相容。

以下是一個簡單的例子，展示了位元運算的使用：

```c
#include <stdio.h>
int main(){
    unsigned int a = 10, b = 22, c;
    c = a & b;    // 按位與，c = 2
    c = a | b;    // 按位或，c = 30
    c = ~a;       // 按位取反，c = 4294967285
    c = a << 1;   // 左移，c = 20
    c = b >> 1;   // 右移，c = 11
    return 0;
}
```